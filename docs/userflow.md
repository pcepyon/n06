# Userflow

## UF-F-001: 소셜 로그인 및 인증

### 입력
- 사용자가 앱 최초 실행
- 네이버 또는 카카오 로그인 버튼 선택
- 이용약관/개인정보처리방침 동의 체크박스 선택
- OAuth 제공자 인증 페이지에서 로그인 정보 입력 및 승인

### 처리
1. 앱 실행 시 토큰 존재 여부 확인
   - 유효한 토큰 존재: 자동 로그인 처리 후 홈 대시보드로 이동
   - 토큰 없음 또는 만료: 로그인 화면 표시
2. 사용자가 소셜 로그인 버튼 클릭
3. 동의 체크박스 미선택 시 버튼 비활성화 유지
4. 동의 완료 후 선택한 제공자의 OAuth 인증 흐름 시작
5. 사용자의 동의 정보를 내부 DB에 기록
   - 이용약관 동의 여부 및 동의 일시
   - 개인정보처리방침 동의 여부 및 동의 일시
6. 인증 성공 시 사용자 프로필 정보 수신
7. Access Token, Refresh Token, 토큰 만료 시간을 안전한 저장소에 저장
8. 내부 DB에 사용자 계정 정보 저장 또는 업데이트
9. 가입일시/마지막 로그인 일시 기록
10. 최초 로그인 여부 확인
   - 최초 로그인: 온보딩 화면으로 이동
   - 재방문 사용자: 홈 대시보드로 이동

### 출력
- 로그인 성공 시 온보딩 화면 또는 홈 대시보드 화면으로 전환
- 인증 실패 시 에러 메시지 표시 및 재시도 유도
- 네트워크 오류 시 연결 확인 안내

### 엣지케이스
- OAuth 인증 과정 중 사용자가 취소: 로그인 화면 유지, 안내 메시지 표시
- Access Token 만료 시: Refresh Token으로 자동 갱신 시도
- Refresh Token 만료 시: 재로그인 유도
- 동시에 여러 기기에서 로그인: 각 기기의 세션 독립적으로 유지
- 네트워크 불안정 시: 재시도 로직 실행 (최대 3회)
- OAuth 제공자 서버 오류: 사용자에게 안내 후 다른 로그인 방법 제안

---

## UF-F000: 온보딩 및 목표 설정

### 입력
- 사용자 이름 입력
- 목표 체중 입력 (kg 단위)
- 현재 체중 입력 (kg 단위)
- 목표 기간 입력 (주 단위, 선택 사항)
- 약물명 입력
- 투여 시작일 선택
- 투여 주기 입력 (일 단위)
- 초기 용량 입력 (mg 단위)
- 증량 계획 입력 (용량, 시기)

### 처리
1. 온보딩 화면 표시
2. 사용자 정보 입력 필드 검증
   - 이름: 비어있지 않은지 확인
   - 목표/현재 체중: 양수 값, 현실적 범위 확인
   - 목표 기간: 양수 값 또는 미입력
3. 목표 기간 입력된 경우 주간 평균 감량 목표 자동 계산
   - 공식: (현재 체중 - 목표 체중) / 목표 기간
4. 계산된 주간 감량 목표가 안전 범위 초과 시 경고 표시
5. 투여 계획 정보 입력 필드 검증
   - 약물명: 비어있지 않은지 확인
   - 시작일: 현재 또는 미래 날짜인지 확인
   - 투여 주기: 양수 값 확인
   - 초기 용량: 양수 값 확인
   - 증량 계획: 논리적 순서 검증
6. 모든 정보를 Repository를 통해 저장
7. 투여 스케줄 자동 생성 로직 실행
8. 저장 완료 후 홈 대시보드로 이동

### 출력
- 입력 필드별 실시간 검증 피드백
- 계산된 주간 감량 목표 표시
- 안전하지 않은 목표 설정 시 경고 메시지
- 온보딩 완료 후 홈 대시보드 화면으로 전환
- 저장 실패 시 에러 메시지 및 재시도 안내

### 엣지케이스
- 목표 체중이 현재 체중보다 큰 경우: 에러 메시지 표시
- 목표 기간 미입력: 주간 감량 목표 계산 건너뛰기
- 주간 감량 목표가 과도한 경우 (주당 1kg 초과): 경고 표시하되 진행 허용
- 증량 계획이 비논리적인 경우 (감량, 역순): 에러 메시지 표시
- 저장 중 앱 종료: 다음 실행 시 온보딩 재진행
- 시작일이 과거인 경우: 현재 날짜로 자동 조정 제안

---

## UF-F001: 투여 스케줄 관리

### 입력
- 투여 계획 정보 (F000에서 설정)
- 특정 투여일 수동 변경 요청
- 특정 용량 수동 변경 요청
- 투여 완료/미완료 상태 기록
- 주사 부위 선택 (복부/허벅지/상완)
- 증량 계획 변경 요청

### 처리
1. 초기 투여 계획 정보 기반 전체 스케줄 생성
   - 시작일부터 종료일까지 투여일 계산
   - 각 투여일에 용량 매핑
   - 증량 계획 반영
   - 1초 이내 완료 필수
2. 투여일/용량 수동 변경 시
   - 변경 지점 이후 모든 스케줄 재계산
   - 재계산 1초 이내 완료 필수
3. 투여 예정일 당일 지정 시간에 푸시 알림 생성
4. 투여 완료 기록 시
   - 투여일시, 실제 용량, 투여 부위, 메모 저장
   - 주사 부위 순환 관리 로직 실행
5. 주사 부위 순환 확인
   - 같은 부위 마지막 사용일로부터 7일 경과 확인
   - 미경과 시 경고 표시하되 진행 허용
6. 투여 누락 관리
   - 예정일로부터 경과 일수 계산
   - 5일 이내: "즉시 투여" 알림 생성
   - 5일 초과: "다음 예정일까지 대기" 안내
7. 증량 계획 변경 시
   - 변경일시, 변경 전/후 계획 기록
   - 변경 지점 이후 스케줄 재계산

### 출력
- 캘린더 뷰와 리스트 뷰로 스케줄 표시
- 투여일 당일 푸시 알림 발송
- 투여 완료 시 완료 상태 UI 업데이트
- 주사 부위 재사용 경고 메시지
- 부위별 투여 이력 시각화
- 누락 용량 관리 안내 메시지
- 스케줄 변경 시 재계산 완료 피드백
- 변경 이력 확인 가능

### 엣지케이스
- 투여일 변경으로 증량 시점이 앞당겨지는 경우: 안전성 경고 표시
- 같은 날 여러 번 투여 기록 시도: 중복 기록 방지 확인 메시지
- 과거 날짜에 투여 미완료 기록 추가: 누락 관리 로직 재실행
- 주사 부위 미선택 투여: 선택 유도하되 진행 허용
- 증량 계획 삭제 시: 현재 용량 유지 스케줄로 재계산
- 앱 알림 권한 거부 시: 인앱 알림 또는 설정 변경 유도
- 스케줄 재계산 중 앱 종료: 다음 실행 시 자동 재계산
- 투여 완료 후 기록 삭제 요청: 삭제 확인 후 스케줄 재계산

---

## UF-F002: 증상 및 체중 기록

### 입력
- 날짜 선택 (오늘/어제/2일 전/캘린더)
- 체중 값 입력 (kg 단위)
- 부작용 증상 선택 (메스꺼움/구토/변비/설사/복통/두통/피로)
- 부작용 심각도 선택 (1-10점 척도)
- 심각도 7-10점 시 24시간 이상 지속 여부 선택 (예/아니오)
- 컨텍스트 태그 선택 (기름진음식/과식/음주/공복/스트레스/수면부족)
- 사용자 정의 태그 추가
- 메모 입력 (선택 사항)

### 처리
1. 날짜 선택 처리
   - 퀵 선택 또는 캘린더에서 날짜 선택
   - 선택된 날짜 검증 (미래 날짜 불가)
2. 체중 기록 처리
   - 체중 값 검증 (양수, 현실적 범위)
   - 날짜, 체중, 기록 시간 저장
   - 3회 터치 이내 완료 확인
3. 부작용 기록 처리
   - 증상 선택 및 심각도 입력
   - 용량 증량 후 경과일 자동 계산 (투여 스케줄 참조)
   - 컨텍스트 태그 저장
   - 날짜, 증상명, 심각도, 경과일, 기록 시간, 메모, 태그 저장
   - 3회 터치 이내 완료 확인
4. 심각도 7-10점 입력 시
   - "24시간 이상 지속 여부" 추가 질문 표시
   - "예" 선택 시 증상 체크 화면으로 안내
   - "아니오" 선택 시 기록 저장 진행
5. 날짜별 여러 증상 동시 기록 허용
6. 기록 완료 후 대처 가이드 자동 표시 (UF-F004 연동)

### 출력
- 입력 필드별 실시간 검증 피드백
- 용량 증량 후 경과일 표시
- 심각도 높은 경우 추가 질문 화면
- 기록 완료 확인 메시지
- 대처 가이드 카드 표시
- 기록 실패 시 에러 메시지

### 엣지케이스
- 미래 날짜 선택: 에러 메시지 표시
- 체중 값이 비현실적인 경우 (20kg 미만, 300kg 초과): 확인 메시지 표시
- 같은 날짜에 체중 중복 기록: 덮어쓰기 확인 메시지
- 같은 날짜/증상 중복 기록: 덮어쓰기 또는 별도 기록 선택
- 증량 이력이 없는 경우: 경과일 계산 건너뛰기
- 과거 기록 수정 시: 수정 확인 후 저장
- 네트워크 오류로 저장 실패 시: 로컬 저장 후 재시도 큐에 추가
- 입력 중 앱 종료: 임시 저장 없이 폐기

---

## UF-F003: 데이터 공유 모드

### 입력
- "기록 보여주기" 버튼 클릭
- 표시 기간 선택 (최근 1개월/3개월/전체)
- 차트 터치로 상세 데이터 확인
- 화면 스크롤로 데이터 탐색
- "공유 종료" 버튼 클릭

### 처리
1. 데이터 공유 모드로 전환
   - 개인화 인사, 뱃지, 설정 등 UI 요소 숨김
   - 모든 편집 기능 비활성화 (읽기 전용)
2. 선택된 기간의 데이터 조회
   - 투여 기록 (날짜, 용량 변화)
   - 투여 순응도 계산
   - 주사 부위 순환 이력
   - 체중 변화 추이 데이터 (목표 체중 포함)
   - 부작용 강도 추이 데이터 (증량 시점 포함)
   - 부작용 패턴 (컨텍스트 태그별 빈도)
   - 증상 체크 기록
3. 가독성 높은 전용 UI로 데이터 렌더링
   - 타임라인 형태 투여 기록
   - 순응도 백분율
   - 주사 부위 이력 표
   - 체중 추이 그래프
   - 부작용 추이 그래프
   - 패턴 분석 차트
   - 증상 체크 이력
4. 차트 터치 시 해당 시점의 상세 데이터 표시
5. 화면 이동 방지 (공유 종료 전까지)
6. "공유 종료" 버튼 클릭 시 일반 모드로 복귀

### 출력
- 읽기 전용 데이터 요약 화면
- 기간별 투여 기록 타임라인
- 투여 순응도 표시
- 주사 부위 순환 이력 표
- 체중 변화 그래프 (목표선 포함)
- 부작용 강도 추이 그래프 (증량 시점 표시)
- 컨텍스트 태그별 부작용 빈도
- 증상 체크 이력
- 공유 종료 시 홈 대시보드로 복귀

### 엣지케이스
- 선택 기간에 데이터 없음: 안내 메시지 표시
- 일부 데이터만 존재: 존재하는 데이터만 표시
- 공유 모드에서 편집 시도: 읽기 전용 안내
- 백 버튼 또는 제스처로 나가기 시도: 공유 종료 확인 메시지
- 화면 캡처 시도: 허용 (제한 없음)
- 데이터 로딩 실패: 에러 메시지 및 재시도 옵션
- 대용량 데이터로 렌더링 지연: 로딩 인디케이터 표시

---

## UF-F004: 부작용 대처 가이드

### 입력
- 부작용 기록 완료 (UF-F002에서 트리거)
- "더 자세한 가이드 보기" 버튼 클릭
- "도움이 되었나요?" 피드백 선택 (예/아니오)
- 가이드 탭에서 증상별 가이드 직접 조회

### 처리
1. 기록된 증상에 해당하는 간단 가이드 자동 조회
   - 메스꺼움: 식사 방법, 피해야 할 음식, 도움 되는 음료, 주사 타이밍 조정
   - 구토: 수분 보충, 식사 재개 순서, 회복 단계별 접근
   - 설사: 식이요법, 수분/전해질 관리, 피해야 할 음식
   - 변비: 식이섬유, 수분 권장량, 신체 활동, 배변 습관
   - 복통: 완화 방법, 식이 조절, 스트레스 관리
   - 두통: 수분 섭취, 휴식 방법, 일상 관리
   - 피로: 휴식/회복, 영양 관리, 활동량 조절
2. 간단 버전 가이드 카드로 표시
3. "도움이 되었나요?" 피드백 수집
   - "예": 감사 메시지 표시
   - "아니오": "다른 팁 보기" 또는 "의료진 상담 권장" 안내
4. "더 자세한 가이드 보기" 선택 시
   - 단계별 상세 가이드 표시
   - 즉시 조치 → 식이 조절 → 생활 습관 → 경과 관찰 순서
5. 가이드 화면에서 증상별 가이드 직접 조회 가능
6. 피드백 기록 저장 (선택적)

### 출력
- 증상별 간단 대처 가이드 카드
- "도움이 되었나요?" 피드백 UI
- "예" 선택 시 감사 메시지
- "아니오" 선택 시 추가 옵션 제공
- "더 자세한 가이드 보기" 버튼
- 상세 가이드 화면 (단계별 구성)
- 가이드 탭에서 모든 증상 가이드 목록

### 엣지케이스
- 등록되지 않은 증상: 일반 대처 가이드 표시
- 여러 증상 동시 기록: 각 증상별 가이드 순차 표시 또는 목록 제공
- 피드백 미선택: 가이드 확인 후 자유롭게 화면 이동 허용
- 상세 가이드 로딩 실패: 간단 가이드 유지 및 재시도 옵션
- 가이드 내용 업데이트 필요 시: 앱 업데이트로 관리

---

## UF-F005: 증상 체크 및 전문가 상담 권장

### 입력
- "증상 체크" 메뉴 진입
- 심각 증상 체크리스트 항목 선택
  - 24시간 이상 계속 구토
  - 물/음식 전혀 삼킬 수 없음
  - 매우 심한 복통
  - 48시간 이상 설사 지속
  - 소변 진한 갈색 또는 8시간 이상 미배출
  - 대변에 피 또는 검은색
  - 피부/눈 흰자위 노란색 변화

### 처리
1. 증상 체크 화면 표시
2. 체크리스트 항목 선택 시
   - 선택 항목 저장
   - 전문가 상담 권장 화면 자동 표시
3. 선택한 증상 요약 표시
4. 증상 기록 자동 저장 (심각도 10점)
   - UF-F002 연동하여 부작용 기록 생성
5. 체크 기록 저장 (날짜시간, 선택 증상)
6. 해당 없는 경우 화면 나가기 허용

### 출력
- 일상 언어로 작성된 증상 체크리스트
- 항목 선택 시 전문가 상담 권장 화면
- 선택한 증상 요약 표시
- "전문가와 상담이 필요합니다" 안내 문구
- 자동 저장된 증상 기록 확인
- 해당 없음 시 나가기 옵션

### 엣지케이스
- 여러 증상 동시 선택: 모두 기록하고 가장 심각한 증상 우선 표시
- 증상 체크 후 안내만 확인하고 나가기: 저장된 기록 유지
- 같은 증상 반복 체크: 각 기록 별도 저장
- 증상 체크 중 증상 완화: 기록 삭제 또는 수정 허용

---

## UF-F006: 홈 대시보드

### 입력
- 앱 실행 또는 홈 탭 선택
- 퀵 액션 버튼 클릭 (체중 기록/부작용 기록/투여 완료)
- 주간 리포트 영역 터치
- 뱃지 영역 터치
- 인사이트 메시지 터치

### 처리 (P0 - MVP 필수)
1. 사용자 프로필 정보 조회
2. 개인화 인사 영역 데이터 생성
   - 사용자 이름
   - 연속 기록일 계산 (마지막 기록 날짜 기준)
   - 현재 치료 주차 계산 (시작일 기준)
3. 주간 목표 진행도 계산
   - 투여 완료 목표: 주간 예정 투여 횟수 대비 실제 완료 횟수
   - 체중 기록 목표: 주간 목표 대비 실제 기록 횟수
   - 부작용 기록 목표: 주간 목표 대비 실제 기록 횟수
   - 각 목표 달성률(%) 계산
4. 다음 예정 일정 조회
   - 다음 투여 예정일 및 용량
   - 다음 증량 예정일 (해당 시)
   - 목표 달성 예상 시기 (현재 추세 기반 계산)
5. 주간 리포트 요약 생성
   - 텍스트 요약: 지난주 투여 횟수, 체중 변화, 부작용 빈도
   - 최근 4주 체중 추이 데이터
   - 최근 1주 부작용 빈도 데이터
   - 투여 순응도(%)
6. 치료 여정 타임라인 생성
   - 시작일부터 현재까지 진행 상황
   - 주요 마일스톤 (증량 시점, 체중 감량 목표 달성)
   - 다음 목표까지 진행도
7. 성취 뱃지 확인
   - 각 뱃지 획득 조건 검증
   - 획득한 뱃지 및 진행도 계산
   - 새 뱃지 획득 시 알림 생성
8. 퀵 액션 버튼 클릭 시 해당 기록 화면으로 이동
9. 리포트/뱃지 터치 시 상세 화면으로 이동

### 처리 (P1 - 향상 기능)
10. 데이터 기반 인사이트 자동 생성 **(P1)**
   - 체중 변화: 전주 대비 1% 이상 감소 시 긍정 메시지
   - 연속 기록: 7일 이상 달성 시 격려 메시지
   - 부작용 개선: 전주 대비 평균 강도 2점 이상 감소 시 안내
   - 컨텍스트 패턴: 태그와 증상 상관관계 발견 시 맞춤 제안
   - 목표 진행: 현재 추세 기반 목표 달성 가능성 안내
   - 투여 순응도: 투여 누락과 체중 변화 상관관계 안내
   - 조건 미충족 시 일반 격려 메시지

### 출력 (P0 - MVP 필수)
- 개인화 인사 (이름, 연속 기록일, 치료 주차)
- 주간 목표 진행도 (투여/체중/부작용 기록 달성률)
- 퀵 액션 버튼 (체중 기록/부작용 기록/투여 완료)
- 다음 예정 일정 (투여일, 증량일, 목표 달성 예상)
- 주간 리포트 요약 (텍스트, 차트)
- 치료 여정 타임라인
- 성취 뱃지 (획득/진행 중)
- 투여 완료 시 축하 효과
- 주간 목표 100% 달성 시 시각적 강조

### 출력 (P1 - 향상 기능)
- 데이터 기반 인사이트 메시지 **(P1)**

### 엣지케이스
- 데이터 없는 신규 사용자: 환영 메시지 및 첫 기록 유도
- 연속 기록일 중단: 0으로 리셋하고 새로 시작 격려
- 주간 목표 미설정: 기본값 사용
- 목표 달성 후: 새 목표 설정 유도 또는 유지 모드 안내
- 인사이트 생성 조건 미충족: 일반 격려 메시지 표시
- 뱃지 획득 조건 동시 충족: 우선순위에 따라 순차 알림
- 데이터 로딩 지연: 스켈레톤 UI 또는 로딩 인디케이터
- 과거 데이터 수정으로 인한 통계 변동: 실시간 재계산
- 퀵 액션 연속 클릭: 중복 방지 처리

---

## UF-SETTINGS: 설정 화면

### 입력
- 홈 대시보드 또는 다른 화면에서 설정 아이콘/메뉴 선택

### 처리
1. 설정 화면으로 이동
2. 사용자 프로필 정보 조회 및 표시
3. 설정 메뉴 목록 렌더링

### 출력
- 설정 메뉴 목록:
  - 프로필 및 목표 수정 (→ UF-008)
  - 투여 계획 수정 (→ UF-009)
  - 주간 기록 목표 조정 (→ UF-013)
  - 푸시 알림 설정 (→ UF-012)
  - 로그아웃 (→ UF-007)
- 현재 사용자 정보 (이름, 가입일 등)

### 엣지케이스
- 로그인 세션 만료 시: 자동으로 로그인 화면으로 이동
- 네트워크 오류로 프로필 로딩 실패: 캐시된 정보 표시 또는 재시도 옵션

---

## UF-007: 로그아웃

### 입력
- 설정 메뉴 진입
- 로그아웃 버튼 클릭
- 로그아웃 확인 대화상자에서 확인 선택

### 처리
1. 설정 화면에서 로그아웃 버튼 표시
2. 로그아웃 버튼 클릭 시 확인 대화상자 표시
3. 확인 선택 시 로그아웃 처리 시작
4. 저장된 Access Token 및 Refresh Token 삭제
5. 로컬 세션 정보 초기화
6. 로그인 화면으로 이동

### 출력
- 로그아웃 확인 대화상자
- 로그아웃 처리 중 인디케이터
- 로그인 화면으로 전환
- 로그아웃 실패 시 에러 메시지

### 엣지케이스
- 로그아웃 중 네트워크 오류: 로컬 토큰 삭제 후 로그인 화면 이동
- 로그아웃 확인 취소: 설정 화면 유지
- 로그아웃 중 앱 종료: 다음 실행 시 로그인 화면 표시
- 로그아웃 후 로컬 데이터 유지 여부: 로컬 데이터는 보존 (재로그인 시 동기화)

---

## UF-008: 프로필 및 목표 수정

### 입력
- 설정 메뉴에서 프로필/목표 수정 선택
- 수정할 정보 입력 (이름/목표 체중/현재 체중/목표 기간)
- 저장 버튼 클릭

### 처리
1. 현재 프로필 및 목표 정보 조회
2. 수정 화면에 기존 정보 표시
3. 사용자 입력 필드 검증
   - 이름: 비어있지 않은지 확인
   - 목표/현재 체중: 양수 값, 현실적 범위
   - 목표 기간: 양수 값 또는 미입력
4. 목표 체중 변경 시 주간 평균 감량 목표 재계산
5. 변경사항 저장
6. 홈 대시보드 관련 데이터 재계산 트리거
7. 저장 완료 후 설정 화면으로 복귀

### 출력
- 기존 정보가 채워진 수정 폼
- 입력 필드별 실시간 검증 피드백
- 재계산된 주간 감량 목표 표시
- 저장 완료 확인 메시지
- 저장 실패 시 에러 메시지

### 엣지케이스
- 목표 체중이 현재 체중보다 큰 경우: 에러 메시지
- 변경사항 없이 저장: 그대로 유지
- 저장 중 앱 종료: 변경사항 폐기
- 현재 체중 변경 시 최근 체중 기록과 불일치: 확인 메시지
- 목표 변경으로 인한 목표 달성 예상일 변동: 홈 대시보드에 반영

---

## UF-009: 투여 계획 수정

### 입력
- 설정 메뉴에서 투여 계획 수정 선택
- 수정할 정보 입력 (약물명/시작일/주기/초기 용량/증량 계획)
- 저장 버튼 클릭

### 처리
1. 현재 투여 계획 정보 조회
2. 수정 화면에 기존 정보 표시
3. 사용자 입력 필드 검증
   - 약물명: 비어있지 않은지 확인
   - 시작일: 현재 또는 미래 날짜 (과거 변경 시 경고)
   - 주기: 양수 값
   - 초기 용량: 양수 값
   - 증량 계획: 논리적 순서
4. 변경사항이 기존 투여 기록에 미치는 영향 분석
5. 영향이 있는 경우 확인 메시지 표시
6. 변경 이력 저장 (날짜, 변경 전/후 계획)
7. 투여 스케줄 재계산 실행
8. 저장 완료 후 설정 화면으로 복귀

### 출력
- 기존 정보가 채워진 수정 폼
- 입력 필드별 실시간 검증 피드백
- 변경 영향 확인 메시지
- 스케줄 재계산 완료 피드백
- 저장 완료 확인 메시지
- 저장 실패 시 에러 메시지

### 엣지케이스
- 과거 시작일로 변경: 경고하되 허용
- 이미 진행 중인 증량 계획 변경: 영향 범위 명확히 안내
- 주기 변경으로 인한 기존 기록과 불일치: 기록 유지, 스케줄만 재계산
- 저장 중 앱 종료: 변경사항 폐기
- 증량 계획 대폭 변경 시: 안전성 경고 표시

---

## UF-011: 과거 기록 수정/삭제

### 입력
- 기록 목록에서 특정 기록 선택
- 수정 또는 삭제 선택
- 수정 시 새로운 값 입력
- 삭제 확인

### 처리
1. 선택한 기록 상세 정보 조회
2. 수정 또는 삭제 옵션 표시
3. 수정 선택 시
   - 기존 값이 채워진 수정 폼 표시
   - 입력 필드 검증
   - 변경사항 저장
   - 관련 통계 및 인사이트 재계산
     * 홈 대시보드(UF-F006) 데이터 갱신
     * 데이터 공유 모드(UF-F003) 리포트 갱신
     * Application Layer의 DashboardNotifier를 통한 상태 관리 로직 실행
4. 삭제 선택 시
   - 삭제 확인 대화상자 표시
   - 확인 시 기록 삭제
   - 관련 통계 및 인사이트 재계산
     * 홈 대시보드(UF-F006) 데이터 갱신
     * 데이터 공유 모드(UF-F003) 리포트 갱신
     * Application Layer의 DashboardNotifier를 통한 상태 관리 로직 실행
5. 완료 후 기록 목록으로 복귀

### 출력
- 기록 상세 화면
- 수정/삭제 옵션
- 수정 폼 (기존 값 표시)
- 삭제 확인 대화상자
- 저장/삭제 완료 확인 메시지
- 실패 시 에러 메시지

### 엣지케이스
- 투여 기록 삭제 시 스케줄 영향: 스케줄은 유지, 기록만 삭제
- 증상 기록 삭제 시 대처 가이드 피드백도 삭제
- 삭제 취소 불가: 명확한 경고 표시
- 여러 기록 일괄 수정/삭제: MVP에서는 개별 처리만 지원
- 수정/삭제 중 앱 종료: 변경사항 폐기

---

## UF-012: 푸시 알림 설정

### 입력
- 설정 메뉴에서 알림 설정 선택
- 투여 알림 시간 설정
- 알림 활성화/비활성화 토글

### 처리
1. 현재 알림 설정 상태 조회
2. 알림 설정 화면 표시
3. 사용자 입력 반영
   - 알림 시간 변경 시 저장
   - 활성화/비활성화 상태 저장
4. 디바이스 알림 권한 확인
   - 권한 없음: 권한 요청
   - 권한 거부: 설정 앱으로 이동 안내
5. 알림 스케줄 업데이트
6. 저장 완료 후 설정 화면으로 복귀

### 출력
- 현재 알림 설정 상태 표시
- 알림 시간 선택 UI
- 활성화/비활성화 토글
- 권한 요청 대화상자
- 저장 완료 확인 메시지

### 엣지케이스
- 디바이스 알림 권한 거부: 설정 앱으로 이동 유도
- 여러 투여 예정일이 같은 날: 한 번만 알림
- 알림 시간이 투여 예정일 이후: 다음날 알림 또는 즉시 알림 선택
- 알림 설정 변경 후 즉시 반영되지 않음: 다음 알림부터 적용 안내

---

## UF-013: 주간 기록 목표 조정

### 입력
- 설정 메뉴에서 주간 기록 목표 조정 선택
- 수정할 목표 값 입력 (체중 기록/부작용 기록 주간 목표 횟수)
- 저장 버튼 클릭

### 처리
1. 현재 주간 목표 설정 조회
2. 수정 화면에 기존 값 표시
3. 사용자 입력 필드 검증
   - 주간 체중 기록 목표: 0~7회 (양수 값)
   - 주간 부작용 기록 목표: 0~7회 (양수 값)
4. 변경사항 저장
5. 홈 대시보드(UF-F006) 주간 목표 진행도 재계산 트리거
6. 저장 완료 후 설정 화면으로 복귀

### 출력
- 기존 값이 채워진 수정 폼
- 입력 필드별 실시간 검증 피드백
- 저장 완료 확인 메시지
- 저장 실패 시 에러 메시지

### 엣지케이스
- 목표 값 0 입력: 경고 메시지 표시하되 허용
- 변경사항 없이 저장: 그대로 유지
- 저장 중 앱 종료: 변경사항 폐기
- 목표 변경 후 홈 대시보드 반영: 실시간 재계산
