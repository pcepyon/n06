# 알림 설정 화면 개선 제안

## Overview

알림 설정 화면의 시각적 계층 강화와 가비움 디자인 시스템의 일관된 적용을 통해 신뢰성과 사용 편의성을 개선합니다. 하드코딩된 색상을 Design System 토큰으로 통일하고, 카드 높이감을 조정하여 섹션별 명확한 시각적 계층을 구현합니다.

## Current State Issues

### Brand Consistency Issues
- **하드코딩된 Info 색상**: `Colors.blue.shade50`와 `Colors.blue` 사용 - Design System의 Info 색상(`#3B82F6`)과 배경색이 일치하지 않음
- **일관되지 않은 카드 높이감**: `elevation: 2`로 모든 카드가 동일한 깊이감을 표현하여 구조적 계층이 약함
- **알림 활성화 토글**: ListTile만 사용하여 상태 변경의 중요도가 낮게 보임
- **섹션 구분 약함**: 카드 간격 16px로 섹션 간 시각적 분리가 불충분

### Visual Quality Issues
- **정보 박스 스타일**: 단순 배경색 + 텍스트만 있어 정보성 강조 부족
- **타이포그래피 계층 약함**: "알림 시간" 제목이 일반 텍스트 크기(16px)로 섹션 제목으로 부족
- **공간 효율성**: 카드 내부 패딩이 불일치 (ListTile 기본값 vs 수동 패딩)
- **시간 선택 버튼**: OutlinedButton으로 표현되어 주요 액션으로 강조 불충분

### UX Issues
- **터치 영역**: 알림 활성화 토글의 터치 영역이 44px 권장값을 충족하지 않을 가능성
- **피드백 명확성**: 정보 메시지가 배경색만으로 표현되어 아이콘 등의 시각적 신호 부족
- **일관된 인터랙션**: 화면 내 다양한 컴포넌트 스타일이 통일되지 않음

## Improvement Direction

### Change 1: Info 색상 메시지 박스 개선
- **Current**: `Colors.blue.shade50` 배경, `Colors.blue` 텍스트의 하드코딩된 정보 박스
- **Proposed**: Design System의 Info 색상 토큰과 구조화된 정보 박스 (아이콘 + 텍스트)
- **Rationale**: 의료 앱으로서 정보 메시지는 명확한 시각적 신호가 필수. Design System 토큰 사용으로 테마 일관성 보장 및 향후 다크모드 전환 시 자동 적용
- **Design System Mapping**:
  - Component: Alert Banner (Section 7 - Feedback Components)
  - Background: Info variant `#EFF6FF` (Blue-50, #3B82F6 at 5%)
  - Border: 1px solid `#3B82F6` at 40% = `rgba(59, 130, 246, 0.4)`
  - Border Radius: 8px (sm)
  - Icon: info (24px), `#3B82F6` (Info color)
  - Text: base (16px, Regular), `#1E40AF` (Blue-800)
  - Padding: 16px (md)
  - Shadow: xs
  - Interactive States: None (static info message)

### Change 2: 알림 활성화 토글 카드 강화
- **Current**: `elevation: 2`인 Card 내 기본 ListTile로 구성
- **Proposed**: 터치 영역 최적화된 ListTile 내부 구조 및 카드 shadow 조정
- **Rationale**: 사용자의 주요 의사결정 요소인 알림 활성화/비활성화 토글의 터치 영역을 44x44px 최소값으로 보장하고, 이 섹션의 중요도를 시각적으로 표현
- **Design System Mapping**:
  - Component: Card Container + List Item (Section 7)
  - Background: White (`#FFFFFF`)
  - Border: 1px solid `#E2E8F0` (Neutral-200) OR shadow only
  - Border Radius: 12px (md)
  - Shadow: md (인터랙티브 카드로 강조) - `0 4px 8px rgba(15, 23, 42, 0.08), 0 2px 4px rgba(15, 23, 42, 0.04)`
  - List Item Height: Min 56px (44px 터치 영역 + padding)
  - Typography:
    - Title: xl (20px, Semibold) - "알림 활성화"
    - Subtitle: base (16px, Regular), `#64748B` (Neutral-500)
  - Spacing:
    - Item padding: 16px horizontal, 12px vertical
    - Title-subtitle gap: 4px
  - Toggle Switch: 48px width × 28px height, Design System standard
  - Hover: Background `#F8FAFC` (Neutral-50) on hover
  - Transition: 200ms ease (Design System standard)

### Change 3: 알림 시간 설정 카드 타이포그래피 강화
- **Current**: "알림 시간" 텍스트 16px, regular weight
- **Proposed**: 섹션 제목을 xl (20px, Semibold)로 상향하여 계층 명확화
- **Rationale**: 카드 내 섹션 제목으로서 본문 텍스트보다 명확한 강조 필요. Design System xl 레벨의 섹션 제목 표준 적용
- **Design System Mapping**:
  - Component: Section Title (within Card)
  - Typography: xl (20px, Semibold)
  - Color: `#1E293B` (Neutral-800)
  - Spacing: 16px bottom margin (md)

### Change 4: TimePickerButton 스타일 개선
- **Current**: `OutlinedButton.icon`으로 기본 스타일
- **Proposed**: 카드 내 주요 액션 버튼으로 시각적 강조 (색상, 높이, 그림자)
- **Rationale**: 사용자가 실제 자주 변경하는 시간 설정 버튼을 더 명확한 액션으로 표현
- **Design System Mapping**:
  - Component: Button - Secondary variant (Section 7 - Buttons)
  - Background: Transparent
  - Text: `#4ADE80` (Primary), Semibold (600), base (16px)
  - Border: 2px solid `#4ADE80`
  - Icon: access_time (24px), `#4ADE80`
  - Padding: 16px horizontal, 12px vertical (Medium button height 44px)
  - Border Radius: 8px (sm)
  - Shadow: None
  - States:
    - Hover: Background `#4ADE80` at 8% (`rgba(74, 222, 128, 0.08)`)
    - Active: Background `#4ADE80` at 12%
    - Disabled: Border/Text at 40% opacity
  - Transition: 200ms ease

### Change 5: 카드 섹션 간격 조정
- **Current**: 16px (sm) 간격
- **Proposed**: 24px (lg) 간격으로 섹션 구분 강화
- **Rationale**: Design System Spacing scale lg (24px)는 섹션 간 간격 표준. 화면 가독성과 시각적 계층 개선
- **Design System Mapping**:
  - Spacing: lg (24px) between sections
  - Applies to: gaps between cards/containers

### Change 6: 페이지 배경색 통일
- **Current**: ListView 내 기본 배경 (흰색 or 기본값)
- **Proposed**: Design System Neutral-50 (`#F8FAFC`)로 명시적 정의
- **Rationale**: 일관된 배경색으로 카드와의 명확한 구분. 모든 설정 화면에서 동일 배경 사용으로 앱 전역 일관성
- **Design System Mapping**:
  - Background: `#F8FAFC` (Neutral-50)
  - Applied to: Scaffold body background color

## Design System Token Reference

| Element | Token Path | Value | Usage |
|---------|-----------|-------|-------|
| Page Background | Colors - Neutral - 50 | `#F8FAFC` | Scaffold body |
| Card Background | Colors - White | `#FFFFFF` | Card containers |
| Card Border | Colors - Neutral - 200 | `#E2E8F0` | Card outline (optional) |
| Card Shadow | Shadow - md | `0 4px 8px rgba(15, 23, 42, 0.08), 0 2px 4px rgba(15, 23, 42, 0.04)` | Card elevation |
| Section Title | Typography - xl | 20px, Semibold | 알림 시간 title |
| List Title | Typography - xl | 20px, Semibold | 알림 활성화 title |
| List Subtitle | Colors - Neutral - 500 | `#64748B` | Subtitle text |
| Button Text | Typography - base | 16px, Semibold | Button label |
| Button Primary Color | Colors - Primary | `#4ADE80` | TimePickerButton border/text |
| Info Background | Colors - Blue - 50 | `#EFF6FF` | Info box background |
| Info Border | Colors - Blue | `#3B82F6` at 40% | Info box border |
| Info Text | Colors - Blue - 800 | `#1E40AF` | Info box text |
| Info Icon | Colors - Blue | `#3B82F6` | Info icon color |
| Section Spacing | Spacing - lg | 24px | Between cards |
| Card Padding | Spacing - md | 16px | Card internal padding |
| Border Radius | Border Radius - sm | 8px | Buttons, info box |
| Border Radius (Card) | Border Radius - md | 12px | Card corners |
| List Item Height | Component - 56px | 56px | Min height for 44px touch area |
| Toggle Size | Component | 48px × 28px | Switch dimensions |
| Transition Duration | Visual Effects - base | 200ms | State transitions |

## Preserved Elements

- **알림 설정의 핵심 구조**: 활성화 토글 + 시간 설정 + 정보 메시지는 유지
- **기능 로직**: Notifier와의 통신, 상태 관리 완전히 유지
- **TimePickerButton 컴포넌트**: 외부 인터페이스 동일 유지 (currentTime, onTimeSelected props 변경 없음)
- **접근성**: 44x44px 터치 영역, 시맨틱 색상 모두 강화되어 개선됨

## Dependencies

### Prerequisites (must do first):
- ✅ None - Design System v1.0 완성, 모든 필요 토큰 정의됨

### Impact (will need updating after):
- ✅ Isolated change - NotificationSettingsScreen만 수정
- 다른 화면에 영향 없음

## Component Reuse

### Existing Components to Reuse:
- ✅ 신규 컴포넌트 제작 대신, Design System 기본 위젯(Card, ListTile, OutlinedButton, Switch) 조합으로 구현
- Alert Banner 패턴 (Section 7 Feedback Components)을 참고하여 정보 박스 구성

### New Components to Create:
- ❌ None - 기존 Flutter Material 위젯의 Design System 토큰 적용만 필요
- TimePickerButton은 이미 존재하며, 스타일만 조정 (외부 인터페이스 변경 없음)

## Success Criteria

1. **Design System 준수**: 모든 색상, 타이포그래피, 간격이 Design System v1.0 토큰 사용
2. **시각적 계층**: 활성화 토글 > 시간 설정 > 정보 메시지 순서로 명확한 계층 표현
3. **접근성**: 모든 인터랙티브 요소 44x44px 이상 터치 영역 확보
4. **일관성**: settings-main-screen과 동일한 card 스타일 및 spacing 패턴 사용
5. **다크모드 준비**: 하드코딩된 색상 제거로 향후 테마 변경 용이성 확보

## Technical Context

### Platform/Framework:
- **Flutter** (Dart)
- **State Management**: Riverpod (AsyncNotifierProvider)
- **Material Design**: Flutter Material 3 기반

### Special Constraints:
- ✅ None - 현재 구현이 깔끔하여 리팩토링 부작용 최소
- 기존 기능 테스트 케이스 유지 필요

## Layout Structure (High-Level)

```
┌─────────────────────────────────┐
│  AppBar: "푸시 알림 설정"        │  (elevation: 0)
└─────────────────────────────────┘
│ Background: #F8FAFC (Neutral-50)│
│                                 │
│  ┌─────────────────────────────┐│  Shadow: md
│  │  알림 활성화 (xl, bold)      ││
│  │  알림이 (활성화/비활성화)됨  ││  Height: 56px+
│  │                   [switch] ││
│  └─────────────────────────────┘│
│           Spacing: lg (24px)     │
│  ┌─────────────────────────────┐│  Shadow: sm
│  │ 알림 시간 (xl, bold)         ││
│  │ Spacing: md (16px)           ││
│  │ ┌───────────────────────────┐││
│  │ │ [icon] HH:MM  [select]   │││  Secondary Button
│  │ │                           │││  Height: 44px
│  │ └───────────────────────────┘││
│  └─────────────────────────────┘│
│           Spacing: lg (24px)     │
│  ┌─────────────────────────────┐│  Alert Banner - Info
│  │[i] 알림은 매 투여 예정일    ││  Background: #EFF6FF
│  │    설정된 시간에 발송됩니다 ││  Height: 56px+
│  └─────────────────────────────┘│
│                                 │
└─────────────────────────────────┘
```

## Approval Required

- [ ] 개선 방향 승인
- [ ] Design System 토큰 충분성 확인
- [ ] 의존성 및 영향도 검토 완료
