# 주간 기록 목표 조정 화면 개선 제안

## Overview

주간 기록 목표 조정 화면을 Gabium 디자인 시스템에 맞춰 현대화합니다. 현재 하드코딩된 색상(Colors.blue[50], Colors.blue[200], Colors.grey[100])을 디자인 시스템 토큰으로 대체하고, 타이포그래피 일관성을 개선하며, UserInfoCard 패턴을 재사용하여 시각적 일관성을 강화합니다.

## Current State Issues

### Brand Consistency Issues

1. **정보 박스 색상 하드코딩**
   - 현재: Colors.blue[50], Colors.blue[200] 사용
   - 문제: Gabium 디자인 시스템의 Info 색상(#3B82F6) 미사용
   - 영향: 다른 정보 박스와 시각적 일관성 부족

2. **투여 목표 정보 박스 회색 배경**
   - 현재: Colors.grey[100] 하드코딩
   - 문제: 디자인 시스템의 Neutral-100(#F1F5F9) 미사용
   - 영향: 전체 앱의 Neutral 팔레트와 불일치

3. **섹션 제목 타이포그래피 일관성 부족**
   - 현재: titleMedium 사용 (약 20px)
   - 문제: 설계 의도가 명확하지 않고 다른 화면과 다를 수 있음
   - 영향: 시각적 계층 구조 약화

### Visual Quality Issues

1. **정보 박스 스타일 불일치**
   - 현재: 기본 border + background 조합
   - 문제: UserInfoCard처럼 shadow를 활용한 깊이감 부족
   - 영향: 카드 계층이 약함

2. **저장 버튼 스타일 불충분**
   - 현재: 기본 ElevatedButton
   - 문제: Gabium 디자인 시스템의 Primary 버튼 규격 미적용
   - 영향: CTA 버튼의 시각적 강조 부족

3. **입력 필드 테두리 스타일**
   - 현재: 기본 OutlineInputBorder
   - 문제: 디자인 시스템의 Text Input 스타일(Border Radius 8px, Focus state) 미적용
   - 영향: 입력 필드가 다른 화면의 입력 필드와 불일치

### UX Issues

1. **확인 다이얼로그 스타일**
   - 현재: AlertDialog (기본 Material 스타일)
   - 문제: Gabium 디자인 시스템의 Modal 스타일 미적용
   - 영향: 통일된 사용자 경험 저하

2. **토스트 알림 스타일**
   - 현재: SnackBar (기본 Material 스타일)
   - 문제: Gabium 디자인 시스템의 Toast/Snackbar 컴포넌트 미사용
   - 영향: 피드백 알림의 일관성 부족

## Improvement Direction

### Change 1: 정보 박스를 Design System 기반 Card로 전환

- **Current:** Colors.blue[50] + Colors.blue[200] border로 구성된 기본 Container
- **Proposed:** Gabium Card 패턴(UserInfoCard 참조) + Info 색상 시스템 적용
- **Rationale:**
  - Design System의 Card Container 스타일(md border radius, sm shadow, Neutral-100 background) 활용
  - 정보 박스임을 나타내기 위해 좌측에 Info color indicator 추가
  - 전체 앱의 카드 시각 언어 일관화
- **Design System Mapping:**
  - Component: Card Container (Section 7 - Layout Patterns)
  - Background: `#F1F5F9` (Neutral-100) 또는 `#EFF6FF` (Info at 10%)
  - Border: 1px solid `#CBD5E1` (Neutral-300) OR no border with shadow
  - Border Radius: 12px (md)
  - Shadow: sm
  - Left Accent: 4px solid `#3B82F6` (Info)
  - Padding: 16px (md)
  - Typography: base (16px) body text

### Change 2: 섹션 제목 타이포그래피 표준화

- **Current:** titleMedium (예측 불가능한 크기)
- **Proposed:** xl (20px, Semibold) Typography scale 사용
- **Rationale:**
  - Design System의 명확한 Type Scale 적용
  - 섹션 제목으로서 xl 크기가 최적
  - 다른 화면의 섹션 제목과 일관성 확보
- **Design System Mapping:**
  - Typography: xl (20px, Semibold)
  - Color: `#334155` (Neutral-700)
  - Line Height: 28px
  - Letter Spacing: 0

### Change 3: 투여 목표 정보 박스 스타일 개선

- **Current:** Colors.grey[100] background, no border/shadow
- **Proposed:** Neutral-100 background + border + subtle shadow (UserInfoCard 패턴)
- **Rationale:**
  - 읽기 전용 정보 박스임을 명확하게 시각화
  - 일관된 카드 스타일로 시각적 깊이감 추가
  - 사용자가 상호작용 불가능함을 명확히 표현
- **Design System Mapping:**
  - Component: Card Container (read-only variant)
  - Background: `#F8FAFC` (Neutral-50) 또는 `#F1F5F9` (Neutral-100)
  - Border: 1px solid `#E2E8F0` (Neutral-200)
  - Border Radius: 12px (md)
  - Shadow: xs (subtle)
  - Padding: 16px (md)
  - Title: sm (14px, Medium) `#334155` (Neutral-700)
  - Body: sm (14px, Regular) `#64748B` (Neutral-500)

### Change 4: 저장 버튼 스타일 표준화

- **Current:** ElevatedButton (기본 Material)
- **Proposed:** GabiumButton Primary variant 사용 (또는 Gabium 디자인 시스템 준수)
- **Rationale:**
  - Primary CTA임을 명확히 표현
  - 로딩 상태 피드백 개선
  - 다른 화면의 저장 버튼과 일관성 확보
- **Design System Mapping:**
  - Component: Button - Primary, Medium
  - Background: `#4ADE80` (Primary)
  - Text: `#FFFFFF` (White), Semibold (600)
  - Height: 44px (Medium)
  - Border Radius: 8px (sm)
  - Shadow: sm
  - Padding: 24px (horizontal)
  - States:
    - Hover: `#22C55E` background, shadow md
    - Active: `#16A34A` background
    - Disabled: `#4ADE80` at 40% opacity
    - Loading: Primary background + 16px white spinner

### Change 5: 입력 필드 스타일 정규화

- **Current:** OutlineInputBorder (기본 Material, 불일치하는 border radius)
- **Proposed:** GabiumTextField 또는 Design System Text Input 스타일 준수
- **Rationale:**
  - Focus state에서 Primary color (#4ADE80) 적용
  - 일관된 border radius (8px)
  - 에러 상태 시각화 표준화
- **Design System Mapping:**
  - Component: Text Input (Section 7 - Form Elements)
  - Height: 48px
  - Padding: 12px 16px
  - Border: 2px solid `#CBD5E1` (Neutral-300)
  - Border Radius: 8px (sm)
  - Font: 16px (base), Regular
  - Background: `#FFFFFF`
  - Focus State: `#4ADE80` border, `#4ADE80` at 10% background
  - Error Border: `#EF4444` (Error)
  - Disabled: `#F1F5F9` background, `#94A3B8` text at 0.6 opacity

### Change 6: 다이얼로그 및 피드백 컴포넌트 표준화

- **Current:** AlertDialog, SnackBar (기본 Material)
- **Proposed:** GabiumDialog (Modal 패턴) + GabiumToast (Toast 패턴)
- **Rationale:**
  - Gabium 브랜드 일관성 확보
  - 통일된 모달/토스트 경험
  - 더 나은 접근성
- **Design System Mapping:**
  - Modal (Section 7 - Feedback Components):
    - Max Width: 480px
    - Padding: 24px
    - Border Radius: 16px (lg)
    - Shadow: xl
    - Backdrop: rgba(15, 23, 42, 0.5)
  - Toast (Section 7 - Feedback Components):
    - Width: 90% viewport (mobile), max 360px
    - Padding: 16px
    - Border Radius: 12px (md)
    - Shadow: lg
    - Success variant: `#10B981` border, `#ECFDF5` background
    - Error variant: `#EF4444` border, `#FEF2F2` background

## Design System Token Reference

| Element | Token Path | Value | Usage |
|---------|-----------|-------|-------|
| Section Title | Typography - xl | 20px, Semibold | 섹션 제목 ("주간 체중 기록 목표") |
| Section Title Color | Colors - Neutral - 700 | #334155 | 섹션 제목 텍스트 |
| Info Box Background | Colors - Neutral - 100 | #F1F5F9 | 정보 박스 배경 |
| Info Box Border | Colors - Neutral - 300 | #CBD5E1 | 정보 박스 테두리 |
| Info Box Accent | Colors - Info | #3B82F6 | 좌측 강조선 (4px) |
| Info Box Shadow | Shadow - sm | 0 2px 4px rgba(0,0,0,0.06) | 정보 박스 깊이감 |
| Info Box Padding | Spacing - md | 16px | 정보 박스 내부 간격 |
| Info Box Border Radius | Border Radius - md | 12px | 정보 박스 모서리 |
| Read-only Box Background | Colors - Neutral - 50 | #F8FAFC | 읽기 전용 박스 배경 |
| Read-only Box Border | Colors - Neutral - 200 | #E2E8F0 | 읽기 전용 박스 테두리 |
| Button BG | Colors - Primary | #4ADE80 | 저장 버튼 배경 |
| Button Text | Typography - base | 16px, Semibold | 저장 버튼 텍스트 |
| Button Padding | Spacing - md | 16px (vertical), 24px (horizontal) | 버튼 내부 간격 |
| Button Height | Component Heights - Medium | 44px | 버튼 높이 |
| Button Border Radius | Border Radius - sm | 8px | 버튼 모서리 |
| Button Shadow | Shadow - sm | 0 2px 4px rgba(0,0,0,0.06) | 버튼 깊이감 |
| Button Hover BG | Colors - Primary (hover) | #22C55E | 호버 상태 배경 |
| Input Field Height | Component Heights - Input | 48px | 입력 필드 높이 |
| Input Border | Colors - Neutral - 300 | #CBD5E1 | 입력 필드 테두리 |
| Input Border Radius | Border Radius - sm | 8px | 입력 필드 모서리 |
| Input Focus Border | Colors - Primary | #4ADE80 | 입력 필드 포커스 테두리 |
| Modal Max Width | Component Sizing - Modal | 480px | 다이얼로그 최대 너비 |
| Modal Border Radius | Border Radius - lg | 16px | 다이얼로그 모서리 |
| Modal Shadow | Shadow - xl | 0 16px 32px rgba(0,0,0,0.12) | 다이얼로그 깊이감 |
| Toast Padding | Spacing - md | 16px | 토스트 내부 간격 |
| Toast Border Radius | Border Radius - md | 12px | 토스트 모서리 |

## Preserved Elements

다음 요소들은 잘 작동하므로 유지합니다:

- **WeeklyGoalInputWidget 로직:** 0-7 범위 검증, 에러 메시지 표시 등 현재 비즈니스 로직은 효과적
- **목표 값 표시 ("X회 / 주"):** 사용자가 현재 설정값을 명확하게 이해할 수 있음
- **저장 전 확인 다이얼로그:** 0 값 설정 시 사용자 의도 확인은 좋은 UX 패턴
- **로딩 상태 관리:** _isLoading 플래그로 중복 클릭 방지

## Dependencies

### Prerequisites (must do first):
- ✅ Gabium Design System v1.0 완료
- ✅ GabiumButton 컴포넌트 또는 Primary Button 패턴 가능
- GabiumTextField (선택): 현재 WeeklyGoalInputWidget 재사용 가능, 나중에 표준화

### Impact (will need updating after):
- ✅ Isolated change (다른 화면에 직접 영향 없음)
- Profile 관련 다른 설정 화면이 있다면 동일 패턴 참고 가능

## Component Reuse

### Existing Components to Reuse:
- **UserInfoCard 패턴** (Registry): Card styling 참고 (border, shadow, padding, typography)
  - 적용 방식: 정보 박스에 UserInfoCard의 Card 스타일 적용
  - 변형: Info color indicator (좌측 4px accent line) 추가

- **GabiumButton** (Registry, 이미 구현 중): Primary 버튼 스타일
  - 적용 방식: 저장 버튼에 GabiumButton Primary variant 사용

- **GabiumTextField** (Registry, 존재 시): Text Input 스타일
  - 현재: WeeklyGoalInputWidget 유지 가능
  - 개선 안: 나중에 GabiumTextField로 표준화

### New Components to Create:
- **InfoCard Component** (선택):
  - 설명: Info color indicator가 있는 정보 표시 카드
  - 프로퍼티: title, description, icon (선택)
  - 사용처: 정보/가이드 텍스트를 표시하는 모든 화면에서 재사용 가능
  - 우선순위: 중간 (현재는 Container로 구현 가능, Phase 3에서 컴포넌트화)

## Success Criteria

1. 모든 색상이 Gabium Design System 토큰으로 변경됨
   - Colors.blue[50/200] → Neutral-100 + Info color
   - Colors.grey[100] → Neutral-50/100

2. 타이포그래피가 Design System 규격을 준수함
   - 섹션 제목: xl (20px, Semibold)
   - 본문: base (16px, Regular)
   - 라벨: sm (14px, Medium)

3. 버튼과 입력 필드가 Design System 컴포넌트 규격을 준수함
   - 버튼: Primary variant, 44px 높이, 8px border radius
   - 입력 필드: 48px 높이, 8px border radius, 포커스 시 Primary color

4. 카드/박스 컴포넌트가 일관된 스타일을 가짐
   - Border, Shadow, Padding, Border Radius 모두 Design System 기준

5. 다이얼로그와 토스트가 Gabium 스타일을 따름
   - 확인 다이얼로그: Modal 패턴
   - 성공/에러 알림: Toast 패턴

## Technical Context

### Platform/Framework:
Flutter (Riverpod 상태관리, Material 3 기반)

### Special Constraints:
- ✅ None
- WeeklyGoalInputWidget은 이미 완성된 커스텀 위젯이므로, Design System 토큰만 적용

## Layout Structure (High-Level)

```
┌─────────────────────────────────────────┐
│ AppBar: 주간 기록 목표 조정              │
├─────────────────────────────────────────┤
│                                         │
│ [Info Card]                            │
│ ┌───────────────────────────────────┐  │
│ │ ▓ 주간 목표를 설정하여 기록       │  │
│ │   달성을 추적하세요.               │  │
│ └───────────────────────────────────┘  │
│                                         │
│ 주간 체중 기록 목표 (xl, Semibold)     │
│ ┌───────────────────────────────────┐  │
│ │ WeeklyGoalInputWidget (48px)       │  │
│ └───────────────────────────────────┘  │
│ X회 / 주                               │
│                                         │
│ 주간 부작용 기록 목표 (xl, Semibold)   │
│ ┌───────────────────────────────────┐  │
│ │ WeeklyGoalInputWidget (48px)       │  │
│ └───────────────────────────────────┘  │
│ X회 / 주                               │
│                                         │
│ [Read-only Card]                       │
│ ┌───────────────────────────────────┐  │
│ │ 투여 목표 (읽기 전용)             │  │
│ │ 투여 목표는 현재 투여 스케줄에  │  │
│ │ 따라 자동으로 계산됩니다.         │  │
│ └───────────────────────────────────┘  │
│                                         │
│ ┌───────────────────────────────────┐  │
│ │         [저장] (Primary, 44px)    │  │
│ └───────────────────────────────────┘  │
│                                         │
└─────────────────────────────────────────┘
```

## Approval Required

- [ ] 사용자가 개선 방향 승인
- [ ] 모든 Design System 토큰 확인됨
- [ ] 의존성 명확함

---

**제안서 생성일:** 2025-11-23
**작성자:** Claude Code (Phase 2A)
**상태:** 승인 대기 중
