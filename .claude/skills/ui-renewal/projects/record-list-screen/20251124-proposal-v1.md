# RecordListScreen 개선 제안서

## 개요

RecordListScreen은 GLP-1 치료 기록을 관리하는 핵심 화면으로, 체중(체중), 증상(증상), 투여(투여) 세 가지 기록 유형을 탭 기반 인터페이스로 표시합니다. 현재는 기본적인 Material Design 스타일이며, Gabium Design System과의 일관성 부족, 시각적 계층 구조 약화, UX 피드백 부족 등의 문제가 있습니다.

## 현재 상태 문제점

### 브랜드 일관성 문제
- ❌ 기본 Material Design 색상 사용 (Gabium 녹색 #4ADE80 미적용)
- ❌ AppBar 스타일이 앱 전체 시스템과 불일치
- ❌ 탭바 활성 상태 표시가 기본 Material 스타일 (밑줄만)
- ❌ ListTile 구조로 제너릭하게 표시, Gabium 디자인 토큰 미사용
- ❌ 삭제 버튼 색상이 빨간색(기본 Material) - Danger 컴포넌트 미사용

### 시각적 품질 문제
- ❌ 계층 구조 불명확: 제목, 부제목, 보조 정보의 가중치 차이 미흡
- ❌ 여백 체계 일관성 부족: ListTile의 기본 패딩만 사용
- ❌ 카드 스타일 미사용: 각 기록 항목이 명확한 컨테이너로 표시되지 않음
- ❌ 기록 타입별 시각적 구분 부족: 체중/증상/투여 항목이 시각적으로 차별화되지 않음
- ❌ 빈 상태 메시지가 간단한 텍스트: 이모지나 아이콘 없음
- ❌ 로딩 상태 표시만 있고 스켈레톤 로더 없음

### UX 문제
- ❌ 삭제 다이얼로그가 AlertDialog로 스타일화 안 됨 (Gabium Modal 미적용)
- ❌ 삭제 피드백(SnackBar)이 기본 스타일 (Gabium Toast 미사용)
- ❌ 기록 타입별로 서로 다른 정보 구조인데 동일하게 표시
  - 체중: kg 값만
  - 증상: 증상명 + 심각도(1-10)
  - 투여: 용량 + 주입 부위
- ❌ 각 기록의 메타데이터(날짜/시간)가 보조 텍스트로만 표시
- ❌ 기록 항목을 탭했을 때 액션 없음: 수정/상세보기 기능 부재

## 개선 방향

### Change 1: 브랜드 색상 시스템 적용

**현재:**
- Material Design 기본 색상 사용
- AppBar가 기본 파란색, 탭바 활성 색상도 기본

**제안:**
Gabium Design System 색상 전체 적용
- AppBar: Neutral-50 배경 (`#F8FAFC`), Neutral-800 텍스트 (`#1E293B`)
- 탭바 활성: Primary 녹색 (`#4ADE80`), 2px 하단 테두리
- 삭제 버튼: Danger 색상 (`#EF4444`), 호버 시 어두운 빨강 (`#DC2626`)

**근거:**
의료 앱으로서 신뢰감과 친근함 전달. 일관된 색상 체계로 사용자 신뢰 강화.

**Design System 매핑:**
- AppBar 배경: Colors - Neutral - 50 (`#F8FAFC`)
- AppBar 제목 텍스트: Typography - xl (20px), Bold, Neutral-800 (`#1E293B`)
- 탭바 활성 텍스트: Colors - Primary (`#4ADE80`)
- 탭바 활성 선: Colors - Primary (`#4ADE80`), 2px 굵기
- 탭바 비활성 텍스트: Colors - Neutral - 500 (`#64748B`)
- 삭제 버튼: Colors - Error (`#EF4444`)
- 삭제 버튼 호버: Colors - Error darker (`#DC2626`)

### Change 2: 기록 항목 카드 구조 개선

**현재:**
- ListTile로 기본적인 리스트 구조만 제공
- 명확한 컨테이너 경계 없음
- 항목 간 시각적 구분이 약함

**제안:**
각 기록을 Card Container로 감싸기
- 배경: White (`#FFFFFF`)
- 테두리: 1px solid Neutral-200 (`#E2E8F0`)
- 모서리: 12px (md)
- 그림자: sm (0 2px 4px rgba(15,23,42,0.06))
- 패딩: 16px (md)
- 항목 간 간격: 16px (md)
- 좌우 마진: 16px (md)

**근거:**
각 기록이 독립적인 정보 단위임을 강조. 시각적 계층 명확화. 모바일 터치 타겟 영역 개선.

**Design System 매핑:**
- Card 배경: Neutral - 50 (`#F8FAFC`) 또는 White (`#FFFFFF`)
- Card 테두리: 1px solid Neutral - 200 (`#E2E8F0`)
- Card 모서리: Border Radius - md (12px)
- Card 그림자: Shadow - sm (0 2px 4px rgba(15,23,42,0.06))
- Card 패딩: Spacing - md (16px)
- 항목 간 간격: Spacing - md (16px)
- 호버 상태: Shadow - md (0 4px 8px rgba(15,23,42,0.08))

### Change 3: 타이포그래피 계층 강화

**현재:**
- 기록 정보와 날짜/시간이 title/subtitle로 표시
- 기록 타입별 정보 표현이 일관되지 않음
- 심각도, 주입 부위 등이 문자열로만 표시

**제안:**
명확한 타이포그래피 계층 정립
1. **기본 정보 (lg, Semibold)**: 체중/증상명/용량 - 사용자가 가장 관심 있는 정보
2. **보조 정보 (base, Regular)**: 심각도/부위 - 보조적 컨텍스트
3. **메타데이터 (sm, Regular)**: 날짜/시간 - 보충 정보

**근거:**
의료 데이터 가독성 최우선. 사용자가 스캔할 때 중요 정보를 먼저 인식하도록 함.

**Design System 매핑:**
- 기본 정보: Typography - lg (18px, Semibold)
- 보조 정보: Typography - base (16px, Regular)
- 메타데이터: Typography - sm (14px, Regular), Color - Neutral-500 (`#64748B`)
- 메타데이터 색상: Neutral - 500 (`#64748B`)

### Change 4: 기록 타입별 시각적 구분

**현재:**
- 세 탭이 있지만 항목 구조가 동일하게 표시됨
- 기록 타입의 의미를 아이콘이나 색상으로 구분하지 않음

**제안:**
각 기록 타입별 가이드 아이콘 + 색상 악센트 추가
- **체중(체중)**: 스케일 아이콘 (24x24px), Accent: Emerald (`#10B981`)
- **증상(증상)**: Alert Circle 아이콘 (24x24px), Accent: Amber (`#F59E0B`)
- **투여(투여)**: Syringe 아이콘 (24x24px), Accent: Primary Green (`#4ADE80`)

각 카드의 좌측에 4px 컬러 바로 표시

**근거:**
색상 심리학 활용: 녹색(투여)=안전/진행, 주황색(증상)=주의, 에메랄드(체중)=목표/성취. 스캔 용이성 향상.

**Design System 매핑:**
- 체중 아이콘 색상: Colors - Emerald (`#10B981`)
- 증상 아이콘 색상: Colors - Amber (`#F59E0B`)
- 투여 아이콘 색상: Colors - Primary (`#4ADE80`)
- 좌측 컬러 바: Border - 4px thick (각 타입별 색상)

### Change 5: 빈 상태(Empty State) 개선

**현재:**
- 단순 텍스트 "기록이 없습니다"
- 아이콘, 설명, 액션 버튼 없음

**제안:**
Gabium Empty State 컴포넌트 적용
- 일러스트레이션: 120x120px (Neutral-300 `#CBD5E1`)
- 제목: "기록이 없습니다" (lg, Semibold, Neutral-700)
- 설명: "아직 기록이 없습니다. 첫 번째 기록을 추가해보세요." (base, Regular, Neutral-500)
- 액션: 기본화면으로 돌아가기 버튼 (Secondary 스타일)
- 전체 가운데 정렬, 위아래 패딩 64px (3xl)

**근거:**
빈 화면도 좋은 사용자 경험의 일부. 다음 액션을 명확히 제시.

**Design System 매핑:**
- Empty State 제목: Typography - lg (18px, Semibold), Neutral-700 (`#334155`)
- Empty State 설명: Typography - base (16px, Regular), Neutral-500 (`#64748B`)
- Empty State 액션: Button - Secondary
- Empty State 정렬: 상하좌우 중앙 정렬
- 내부 간격: Spacing - lg (24px)

### Change 6: 피드백 컴포넌트 현대화

**현재:**
- 삭제 확인: 기본 AlertDialog (Material 스타일)
- 삭제 결과: SnackBar (기본 스타일)

**제안:**
Gabium 컴포넌트 적용
- 삭제 확인: Gabium Modal Dialog
  - 제목 (2xl, Bold): "기록을 삭제하시겠습니까?"
  - 본문 (base, Regular): "삭제된 기록은 복구할 수 없습니다."
  - 액션: 취소(Secondary) + 삭제(Danger)
  - 모서리: 16px (lg), 그림자: xl
- 삭제 피드백: Gabium Toast
  - 성공: Green, 아이콘+텍스트, 3초 표시
  - 실패: Red, 아이콘+텍스트, 5초 표시

**근거:**
일관된 피드백 경험. 위험한 액션에 대한 명확한 경고.

**Design System 매핑:**
- Modal 배경: White (`#FFFFFF`)
- Modal 모서리: Border Radius - lg (16px)
- Modal 그림자: Shadow - xl (0 16px 32px rgba(15,23,42,0.12))
- Modal 제목: Typography - 2xl (24px, Bold)
- Toast 성공: Colors - Success (`#10B981`)
- Toast 에러: Colors - Error (`#EF4444`)
- Toast 배경: 타입별 색상 + 10% opacity

### Change 7: 로딩 및 인터랙션 상태 강화

**현재:**
- 로딩: 중앙 CircularProgressIndicator만 표시
- 기록 항목: 클릭 피드백 없음

**제안:**
- 로딩 상태: CircularProgressIndicator (Primary 색상) + "기록을 불러오는 중..." 텍스트
- 각 카드: 호버 시 Shadow 변경 + translateY(-2px) 애니메이션
- 삭제 버튼: 호버 시 배경색 변경 + 커서 변경
- 롱프레스 피드백: 강조색 배경 (Neutral-100)

**근거:**
사용자에게 명확한 인터랙션 피드백 제공. 의료 앱으로서 로딩 상태도 신뢰감 있게 표시.

**Design System 매핑:**
- 로딩 스피너 색상: Colors - Primary (`#4ADE80`)
- 카드 호버 그림자: Shadow - md (0 4px 8px rgba(15,23,42,0.08))
- 카드 호버 애니메이션: Transitions - base (200ms)
- 롱프레스 배경: Neutral - 100 (`#F1F5F9`)

## Design System 토큰 참조표

| 요소 | 토큰 경로 | 값 | 사용처 |
|------|---------|-----|-------|
| AppBar 배경 | Colors - Neutral - 50 | #F8FAFC | 상단 바 배경 |
| AppBar 텍스트 | Typography - xl | 20px, Bold, #1E293B | 화면 제목 |
| 탭 활성 텍스트 | Colors - Primary | #4ADE80 | 활성 탭 라벨 |
| 탭 활성 라인 | Colors - Primary + Border | #4ADE80, 2px | 탭 하단 강조 |
| 탭 비활성 텍스트 | Colors - Neutral - 500 | #64748B | 비활성 탭 라벨 |
| 카드 배경 | Neutral - White | #FFFFFF | 기록 항목 컨테이너 |
| 카드 테두리 | Colors - Neutral - 200 | #E2E8F0, 1px | 카드 경계 |
| 카드 모서리 | Border Radius - md | 12px | 카드 라운딩 |
| 카드 그림자 | Shadow - sm | 0 2px 4px rgba(15,23,42,0.06) | 카드 깊이감 |
| 카드 호버 그림자 | Shadow - md | 0 4px 8px rgba(15,23,42,0.08) | 상호작용 피드백 |
| 카드 내부 패딩 | Spacing - md | 16px | 컨텐츠 여백 |
| 항목 간 간격 | Spacing - md | 16px | 카드 사이 간격 |
| 기본 정보 텍스트 | Typography - lg | 18px, Semibold | 주요 정보 표시 |
| 보조 정보 텍스트 | Typography - base | 16px, Regular | 보조 정보 표시 |
| 메타데이터 텍스트 | Typography - sm | 14px, Regular, #64748B | 날짜/시간 |
| 아이콘 색상(체중) | Colors - Emerald | #10B981 | 체중 기록 구분 |
| 아이콘 색상(증상) | Colors - Amber | #F59E0B | 증상 기록 구분 |
| 아이콘 색상(투여) | Colors - Primary | #4ADE80 | 투여 기록 구분 |
| 삭제 버튼 | Colors - Error | #EF4444 | 위험 액션 |
| 삭제 버튼 호버 | Colors - Error + 10% | #DC2626 | 호버 상태 |
| 에러 색상 | Colors - Error | #EF4444 | 에러 메시지 |
| 성공 색상 | Colors - Success | #10B981 | 성공 메시지 |
| 모달 배경 | Neutral - White | #FFFFFF | 다이얼로그 컨테이너 |
| 모달 모서리 | Border Radius - lg | 16px | 다이얼로그 라운딩 |
| 모달 그림자 | Shadow - xl | 0 16px 32px rgba(15,23,42,0.12) | 모달 강조 |
| 로딩 스피너 | Colors - Primary | #4ADE80 | 로딩 표시 |
| Empty State 제목 | Typography - lg | 18px, Semibold, #334155 | 빈 화면 제목 |
| Empty State 설명 | Typography - base | 16px, Regular, #64748B | 빈 화면 설명 |

## 보존되는 요소

무엇을 바꾸지 않을 것인가:

- ✅ **탭 기반 인터페이스**: 세 가지 기록 타입 분리는 효과적 (체중/증상/투여)
- ✅ **최신순 정렬**: 사용자가 가장 최근 기록을 먼저 보는 방식이 직관적
- ✅ **삭제 기능**: 기록 관리의 필수 기능
- ✅ **날짜/시간 표시**: 의료 기록의 타임스탬프는 매우 중요
- ✅ **기록 타입별 정보 구조**: 각 타입의 고유 정보(체중kg, 증상명+심각도, 용량+부위)는 유지

## 의존성

### 선행 조건 (먼저 완료되어야 함)
- ✅ Gabium Design System v1.0 완료
- ✅ Design System 컴포넌트 (Button, Modal, Toast 등) 정의됨

### 영향 범위 (이후 업데이트 필요)
- 📱 Other screens using record lists (if any): None identified
- 🎨 Design System consistency: This becomes a reference for other list-based screens
- 📝 Components to register: RecordListCard (새로운 재사용 컴포넌트)

## 컴포넌트 재사용

### 기존 컴포넌트 재사용
- **GabiumButton**: 삭제 액션 버튼 (Danger 스타일)
- **GabiumModal** (또는 AlertDialog 대체): 삭제 확인 다이얼로그
- **GabiumToast**: 삭제 성공/실패 피드백

### 새로운 컴포넌트
- **RecordListCard**: 각 기록 항목 카드 컨테이너
  - 속성: `record`, `recordType` (weight/symptom/dose), `onDelete`, `onTap`
  - 기본정보/보조정보/메타데이터 슬롯
  - 좌측 컬러바 자동 표시
  - 호버 애니메이션 포함
- **RecordTypeIcon**: 기록 타입별 아이콘
  - 입력: `recordType` enum
  - 출력: 올바른 아이콘 + 색상
- **EmptyRecordState**: 빈 상태 표시
  - 재사용 가능한 컴포넌트로 정의

## 성공 기준

1. **브랜드 일관성**: 모든 UI 요소가 Gabium Design System 토큰 사용
   - AppBar, 탭바, 버튼, 색상 등이 Gabium 스타일로 통일됨
   - 다른 Gabium 디자인 화면과 시각적 일관성 달성

2. **시각적 품질 향상**: 명확한 정보 계층과 개선된 여백
   - 각 기록이 별도의 카드로 명확히 구분됨
   - 타이포그래피 계층이 명확하여 스캔 가능성 향상
   - 여백이 8px 배수 시스템 준수

3. **UX 개선**: 더 나은 피드백과 상호작용
   - 삭제 확인/결과가 Gabium 스타일의 현대적 컴포넌트 사용
   - 빈 상태가 친절한 가이드로 표시됨
   - 로딩 상태가 더 명확하게 전달됨

4. **기록 타입 구분**: 시각적/색상 구분으로 빠른 인식
   - 아이콘과 컬러바로 기록 타입이 즉시 구분됨
   - 사용자가 탭 전환 없이도 현재 타입 인식

5. **코드 품질**: 재사용 가능한 컴포넌트 구축
   - RecordListCard, RecordTypeIcon, EmptyRecordState를 Gabium 컴포넌트로 등록
   - 다른 화면에서 즉시 재사용 가능

## 기술적 맥락

### 플랫폼/프레임워크
- **Framework**: Flutter
- **State Management**: Riverpod
- **Current Architecture**: Multi-tab with separate notifiers per record type

### 특수 제약사항
- ✅ 없음 - Presentation Layer 전용 개선이므로 비즈니스 로직 변경 없음
- 기존 Notifier/Provider 구조 유지
- 기존 삭제 로직 유지, UI만 개선

## 레이아웃 구조 (고수준)

```
+------------------------------------------+
| RecordListScreen                         |
+------------------------------------------+
| AppBar (Neutral-50 bg)                  |
| - 제목: "기록 관리" (xl, Bold)          |
+------------------------------------------+
| TabBar (Primary color accent)            |
| - 체중 | 증상 | 투여 (Medium 16px)     |
+------------------------------------------+
| TabBarView Content (가운데)              |
|                                          |
| RecordListCard (Card Container)          |
| ┌──────────────────────────────────┐    |
| │●│ 기본정보 (lg, Semibold)        │    |  ← 좌측 4px 컬러바
| │  │ 보조정보 (base, Regular)      │    |
| │  │ 메타데이터 (sm, Regular)      │    |
| │                    [Delete Icon] │    |
| └──────────────────────────────────┘    |
|                                          |
| RecordListCard (반복)                    |
|                                          |
| ... (최신순 정렬)                        |
|                                          |
+------------------------------------------+
|                                          |
| 또는 EmptyRecordState (빈 상태)          |
| [120x120 Illustration]                   |
| 기록이 없습니다                          |
| 첫 기록을 추가해보세요.                  |
| [버튼: 돌아가기]                         |
|                                          |
+------------------------------------------+
```

## 승인 필요

- [ ] 사용자가 개선 방향 승인
- [ ] 모든 Design System 토큰 확인됨
- [ ] 의존성 확인됨
