# EmergencyCheckScreen UI Renewal Proposal

**Screen**: Emergency Symptom Check
**Date**: 2025-11-24
**Status**: Proposal (Phase 2A)
**Target**: lib/features/tracking/presentation/screens/emergency_check_screen.dart

---

## 1. Current State Analysis

### Visual Issues
- **Color System**: Material defaults (Colors.blue.shade50, Colors.red) - Design System tokens 미사용
- **Typography**: 불일관한 폰트 크기 (16px 제목, 14px 본문)
- **Warning Emphasis**: EMERGENCY 화면이지만 Warning/Error 색상이 약함
- **Component Standards**: Material CheckboxListTile, OutlinedButton, ElevatedButton 사용
- **Dialog Design**: ConsultationRecommendationDialog가 기본 AlertDialog 스타일

### UX Issues
- **브랜드 일관성**: Gabium Design System 토큰 미적용
- **피드백 컴포넌트**: SnackBar 사용 (GabiumToast로 전환 필요)
- **버튼 스타일**: Material 기본 버튼 (GabiumButton으로 전환 필요)
- **카드 스타일**: Header 컨테이너가 수동 스타일링

### Accessibility Gaps
- **색상 대비**: Warning 색상이 WCAG AA 기준 미충족 가능성
- **터치 영역**: CheckboxListTile 터치 영역이 44x44px 미충족 가능성
- **시맨틱 구조**: 긴급 증상 체크리스트가 명확한 시맨틱 구조 부족

---

## 2. Proposed Solutions

### Phase 2A Direction

#### 2.1 Color System Overhaul
| Element | Current | Proposed | Token |
|---------|---------|----------|-------|
| Header Background | Colors.blue.shade50 | Neutral-50 + Warning border | #F8FAFC + Warning accent |
| Severity Text | Colors.red | Error | #EF4444 |
| Checkbox (checked) | Material teal | Primary | #4ADE80 |
| Dialog Background | AlertDialog default | Error-tinted (light) | #FEF2F2 |
| Dialog Title | Colors.red | Error + Bold | #EF4444, 700 weight |
| Dialog Border | Custom | Error subtle | #EF4444 at 30% |
| Button (Confirm) | ElevatedButton | Primary GabiumButton | #4ADE80 |
| Button (No Symptoms) | OutlinedButton | Secondary GabiumButton | Primary outline |

#### 2.2 Typography Standardization
- **Header Title**: 2xl (24px), Bold (700) - 섹션 제목
- **Subtitle**: base (16px), Regular (400) - 보조 설명
- **Symptom Item**: base (16px), Regular (400) - 목록 항목
- **Dialog Title**: 2xl (24px), Bold (700), Error color
- **Dialog Message**: base (16px), Regular (400)
- **Dialog Symptom Item**: sm (14px), Regular (400)

#### 2.3 Component Structure
```
EmergencyCheckScreen
├── AppBar (Gabium 패턴)
├── Header Card (Error-tinted, Warning accent)
├── ChecklistSection
│   └── EmergencyChecklistItem (신규 컴포넌트)
│       ├── Custom Checkbox (44x44px)
│       └── Symptom Text
└── BottomActionBar
    ├── GabiumButton (Secondary)
    └── GabiumButton (Primary, with state)

ConsultationRecommendationDialog (재설계)
├── Error-themed Header
├── Symptom List (with icons)
├── Alert Banner (Warning pattern)
└── Modal Footer (with GabiumButton)
```

#### 2.4 New Components
1. **EmergencyChecklistItem**
   - Purpose: 개별 증상 체크 항목
   - Reusability: 유사 체크리스트에서 재사용 가능
   - Content: 커스텀 checkbox (44x44px) + 증상 텍스트
   - States: unchecked, checked, disabled

2. **ConsultationRecommendationDialog** (개선)
   - Purpose: 전문가 상담 권장 모달
   - Styling: Gabium Modal 패턴 + Error 색상 강조
   - Content: 제목 + 증상 목록 + 경고 메시지 + 확인 버튼

#### 2.5 Spacing & Layout
- **Header Padding**: 24px (lg)
- **Symptom List Spacing**: 12px (md) between items
- **Bottom Bar Padding**: 16px (md)
- **Button Height**: 44px (Medium)
- **Checkbox Size**: 24x24px (visual), 44x44px (touch)

---

## 3. Design System Tokens Used

### Colors
- **Primary**: #4ADE80 (Success CTA)
- **Error**: #EF4444 (Emergency warning)
- **Warning**: #F59E0B (Optional severity accent)
- **Neutral-50**: #F8FAFC (Page background)
- **Neutral-100**: #F1F5F9 (Card background)
- **Neutral-800**: #1E293B (Text - strong)
- **Neutral-600**: #475569 (Text - secondary)

### Typography
- **2xl**: 24px, 700 weight (Headers)
- **base**: 16px, 400 weight (Body)
- **sm**: 14px, 400 weight (Secondary text)

### Spacing
- **md**: 16px
- **lg**: 24px
- **xl**: 32px

### Components
- **GabiumButton** (Primary, Secondary, Danger)
- **GabiumToast** (Success, Error, Warning)
- **Modal Pattern** (Gabium-styled AlertDialog)

---

## 4. Impact Assessment

### Files to Modify
1. `emergency_check_screen.dart` (120 → 180 lines, +50%)
2. `consultation_recommendation_dialog.dart` (65 → 100 lines, +53%)

### New Files to Create
1. `emergency_checklist_item.dart` (80-100 lines)

### Reusable Components
1. **GabiumButton** - 확인/해당없음 버튼
2. **GabiumToast** - 저장 완료/실패 피드백
3. **Modal Pattern** - 다이얼로그 구조

### No Breaking Changes
- 비즈니스 로직 100% 보존
- 데이터 모델 변경 없음
- API 호출 패턴 유지
- Application/Domain/Infrastructure 층 무영향

---

## 5. Success Criteria

### Visual Fidelity
- [ ] Gabium Design System 토큰 100% 적용
- [ ] WCAG AA 색상 대비 기준 충족 (4.5:1)
- [ ] 모든 버튼 >= 44px 터치 영역

### Component Quality
- [ ] GabiumButton으로 전환 (Material 버튼 제거)
- [ ] GabiumToast로 피드백 통일
- [ ] Modal 패턴 일관성

### Code Quality
- [ ] 타이포그래피 계층 일관성
- [ ] 간격 시스템 8px 배수
- [ ] 명확한 색상 의미론

### Testing
- [ ] Flutter analyze 0 warnings
- [ ] 모든 상태(unchecked, checked, disabled) 작동
- [ ] 비즈니스 로직 보존

---

## 6. Timeline

- **Phase 2A (Analysis)**: 현재 ✅
- **Phase 2B (Implementation Spec)**: 30분 예상
- **Phase 2C (Auto Implementation)**: 1시간 예상
- **Phase 3 (Asset Organization)**: 30분 예상

**Total**: ~2시간

---

## Notes

### Design Decisions
1. **Error 색상 강조**: EMERGENCY 컨텍스트에서 시각적 경고 극대화
2. **Neutral-50 배경**: 의료 앱의 신뢰감과 부드러움 균형
3. **EmergencyChecklistItem 추출**: 향후 유사 체크리스트에 재사용 가능
4. **Modal 디자인 통일**: Gabium 패턴으로 전체 앱 일관성 강화

### Risk Assessment
- **Low Risk**: 기존 로직 완전 보존, 순수 UI 개선
- **No API Changes**: 로컬 상태 관리만 수정
- **Backward Compatible**: 사용자 데이터 영향 없음
