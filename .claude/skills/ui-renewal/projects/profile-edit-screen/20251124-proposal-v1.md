# ProfileEditScreen 개선 제안서

## 개요

ProfileEditScreen은 사용자 프로필과 건강 목표를 수정하는 화면입니다. 사용자가 이름, 현재 체중, 목표 체중, 목표 기간을 입력하며, 시스템이 주간 감량 목표를 자동 계산하고 위험 수준이 높으면 경고합니다. 현재 Material Design 기본 컴포넌트를 사용하고 있어 Gabium Design System과의 시각적 일관성이 부족하며, UX 개선이 필요합니다.

---

## 현재 상태 분석

### 브랜드 일관성 문제

- **AppBar 스타일 미적용**: 기본 Material AppBar 사용 (Design System Header 패턴 미적용)
- **컬러 시스템 미적용**: Material 기본 색상 사용, 가비움 Primary (#4ADE80) 미사용
- **타이포그래피 비일관성**: Theme.of(context).textTheme 기본값 사용, Design System Type Scale 미적용
- **입력 필드 스타일 미적용**: 기본 TextField의 OutlineInputBorder 사용, Design System 토큰 부재
- **간격 시스템 미적용**: 임의의 16px SizedBox 사용, 8px 배수 시스템 미준수
- **버튼 스타일 미적용**: FloatingActionButton 사용, 가비움 Button 컴포넌트 미사용
- **피드백 컴포넌트 미적용**: SnackBar 사용, Gabium Toast 미사용
- **경고 메시지 비일관성**: 수작업 Container로 경고 표시, 스타일 미표준화

### 시각적 품질 문제

- **입력 필드 높이 부족**: 기본 Material 높이 사용, 48px Design System 미적용
- **레이블 가독성 약함**: 타이포그래피 계층 부재
- **입력 필드 포커스 상태 미흡**: 기본 Material 포커스 상태만 사용
- **주간 감량 목표 박스 스타일**: 기본 Container + Border 사용, Card 패턴 미적용
- **경고 아이콘 표시 부족**: 노란색 테두리만 사용, 아이콘+색상 조합 미사용
- **저장 버튼 상태 피드백 부족**: FloatingActionButton 로딩 상태 미표시
- **유효성 검사 오류 표시**: 하단 고정 컨테이너로 표시, Design System 피드백 패턴 미사용

### UX 문제

- **폼 검증 실시간 피드백 부족**: 입력 변경 시 즉시 검증 메시지 표시 없음
- **에러 메시지 위치 불명확**: 하단 고정 배치로 스크롤 중 보이지 않을 수 있음
- **저장 완료 피드백**: SnackBar만 사용, 성공 토스트 미사용
- **로딩 상태 시각화 부족**: FloatingActionButton 로딩 상태 없음
- **모바일 최적화 부족**: FloatingActionButton이 입력 필드를 가릴 수 있음
- **입력 필드 검증 가시성**: 개별 필드 검증 피드백 부재

---

## 개선 방향

### 변경 1: AppBar 스타일 Design System 적용

**현재:**
```dart
AppBar(
  title: const Text('프로필 및 목표 수정'),
  elevation: 0,
)
```

**개선 내용:**
- Gabium Header 패턴 적용 (56px height, Neutral-50 background)
- 테두리 추가 (1px solid Neutral-200)
- 타이포그래피 표준화 (xl - 20px, Semibold)

**Design System 매핑:**
- 컴포넌트: Layout - Header (Section 7)
- 높이: 56px
- 배경: Neutral-50 (#F8FAFC)
- 테두리: 1px solid Neutral-200 (#E2E8F0)
- 타이포그래피: xl (20px, Semibold, Neutral-800)

### 변경 2: 입력 필드 스타일 표준화 (GabiumTextField 재사용)

**현재:**
```dart
TextField(
  controller: _nameController,
  decoration: const InputDecoration(
    labelText: '이름',
    border: OutlineInputBorder(),
  ),
)
```

**개선 내용:**
- GabiumTextField 컴포넌트 재사용 (일관된 스타일, 48px 높이)
- 포커스 상태 시각화 (Primary 테두리, 배경색)
- 입력 완료 상태 피드백 추가
- 라벨 타이포그래피 표준화 (sm - 14px, Semibold)

**Design System 매핑:**
- 높이: 48px
- 테두리: 2px solid Neutral-300 (기본), 2px solid Primary (포커스)
- 배경 포커스: Primary 10%
- 타이포그래피: base (16px, Regular) 입력 / sm (14px, Semibold) 라벨

### 변경 3: 주간 감량 목표 박스를 Card 패턴으로 개선

**현재:**
```dart
Container(
  padding: const EdgeInsets.all(12),
  decoration: BoxDecoration(
    border: Border.all(color: _showWeeklyGoalWarning ? Colors.orange : Colors.grey),
    borderRadius: BorderRadius.circular(8),
  ),
  child: ...
)
```

**개선 내용:**
- Card Container 패턴 적용 (Design System)
- 배경색: White (#FFFFFF)
- 정상 상태: Neutral-200 테두리 또는 sm 쉐도우
- 경고 상태: Warning 테두리 (4px 좌측) + Warning-50 배경
- 패딩 표준화 (md - 16px)

**Design System 매핑:**
- 컴포넌트: Layout - Card Container (Section 7)
- 배경: White (#FFFFFF)
- 테두리: 1px solid Neutral-200 또는 4px solid Warning (좌측, 경고 시)
- 배경 경고: Warning-50 (#FFFBEB)
- 쉐도우: sm (기본), md (경고)
- 패딩: md (16px)
- 타이포그래피: base (16px, Regular) 제목 / sm (14px, Regular) 경고

### 변경 4: 경고 메시지 아이콘 + 색상 시각화

**현재:**
```dart
Row(
  children: [
    const Icon(Icons.warning, color: Colors.orange, size: 20),
    ...
  ],
)
```

**개선 내용:**
- ValidationAlert 컴포넌트 고려 (또는 Alert Banner 패턴)
- Warning 색상으로 통일 (#F59E0B)
- 아이콘 + 텍스트 + 색상 체계 일관화
- 패딩 및 배치 표준화 (md - 16px)

**Design System 매핑:**
- 색상: Warning (#F59E0B)
- 배경: Warning-50 (#FFFBEB)
- 텍스트: Dark Warning (#92400E)
- 아이콘 크기: 24px
- 패딩: sm (8px) 좌우

### 변경 5: 유효성 검사 피드백 개선

**현재:**
```dart
if (_validationError != null)
  Positioned(
    bottom: 0,
    child: Container(
      color: Colors.red.withValues(alpha: 0.8),
      padding: const EdgeInsets.all(16),
      child: Text(_validationError!),
    ),
  )
```

**개선 내용:**
- 검증 오류를 GabiumToast로 표시 (하단 중앙 팝업)
- Design System 색상 적용 (Error #EF4444)
- 자동 사라짐 (5초)
- 스택 오버레이 제거 (더 깔끔한 UX)

**Design System 매핑:**
- 컴포넌트: Feedback - Toast/Snackbar (Section 7)
- 배경: Error-50 (#FEF2F2)
- 테두리: 4px solid Error (#EF4444)
- 텍스트: Dark Error (#991B1B)
- 아이콘: 24px

### 변경 6: 저장 버튼 개선 (GabiumButton 재사용)

**현재:**
```dart
floatingActionButton: _editedProfile != null
    ? FloatingActionButton(
        onPressed: _handleSave,
        child: const Icon(Icons.check),
      )
    : null
```

**개선 내용:**
- FloatingActionButton → GabiumButton Primary variant로 변경
- 버튼 위치: 폼 하단 (고정 또는 스크롤 내)
- 로딩 상태: isLoading = true 시 스피너 표시
- 버튼 텍스트: "저장" (아이콘만 아닌 명확한 텍스트)
- 전체 너비: fullWidth = true (모바일 최적화)
- 크기: Medium (44px)

**Design System 매핑:**
- 컴포넌트: Button - Primary Variant (Section 7)
- 높이: 44px
- 배경: Primary (#4ADE80)
- 텍스트: White, Semibold
- 로딩 상태: 스피너 포함

### 변경 7: 페이지 배경색 명시화

**현재:**
- 기본 Material 배경 (흰색)

**개선 내용:**
- Neutral-50 (#F8FAFC) 명시적 적용
- 섹션 간 카드 구분 강화

**Design System 매핑:**
- 배경: Neutral-50 (#F8FAFC)

### 변경 8: 전체 간격 시스템 통일

**현재:**
- 임의의 16px SizedBox 사용

**개선 내용:**
- 모든 간격을 8px 배수로 정렬
- md (16px) = 표준 간격
- sm (8px) = 컴포넌트 내부
- lg (24px) = 섹션 간 간격

**Design System 매핑:**
- Spacing Scale (Section 5)

---

## 개선 요약

| # | 변경 항목 | 현재 | 개선 | Design System | 우선순위 |
|---|---------|------|------|--------------|---------|
| 1 | AppBar 스타일 | Material 기본 | Header 패턴 | Layout Section 7 | 높음 |
| 2 | 입력 필드 | TextField 기본 | GabiumTextField | Form Elements | 높음 |
| 3 | 주간 목표 박스 | Container Border | Card Pattern | Layout | 중간 |
| 4 | 경고 메시지 | 수작업 Row | ValidationAlert | Feedback | 중간 |
| 5 | 검증 오류 피드백 | Stack Overlay | GabiumToast | Feedback | 높음 |
| 6 | 저장 버튼 | FloatingActionButton | GabiumButton | Button | 높음 |
| 7 | 페이지 배경 | Material 기본 | Neutral-50 | Colors | 낮음 |
| 8 | 간격 시스템 | 임의 값 | 8px 배수 | Spacing | 중간 |

---

## 신규 컴포넌트 필요 여부

**분석 결과:** 신규 컴포넌트 불필요
- GabiumTextField ✅ (입력 필드)
- GabiumButton ✅ (저장 버튼)
- GabiumToast ✅ (피드백)
- ValidationAlert ✅ (경고 메시지) - 또는 Alert Banner 패턴
- 모두 기존 컴포넌트로 충분함

---

## 구현 순서

1. **변경 1**: AppBar → Design System Header 패턴
2. **변경 6**: FloatingActionButton → GabiumButton (폼 하단으로 이동)
3. **변경 2**: TextField 모두 → GabiumTextField
4. **변경 3**: 주간 목표 박스 → Card Pattern
5. **변경 4**: 경고 메시지 → ValidationAlert 또는 Alert Banner
6. **변경 5**: Stack Overlay → GabiumToast
7. **변경 7, 8**: 배경색 및 간격 통일

---

## 예상 효과

- ✅ 브랜드 일관성: Material → Gabium Design System 100% 적용
- ✅ 시각적 품질: 입력 필드 48px 통일, 카드 패턴 적용
- ✅ UX 개선: 로딩 상태 표시, 토스트 피드백, 명확한 에러 메시지
- ✅ 접근성: 터치 영역 44x44px 이상, 명확한 색상 대비
- ✅ 모바일 최적화: 전체 너비 버튼, 안전한 배치

